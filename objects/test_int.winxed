$load 'rosella/test.pbc';
$load 'int.pbc';

function intcls() {
    using Python.type;
    using Python.object;
    using Python.int;

    var t = type();
    var o = object(t);

    return int(t, o);
}

class int {
    function boot() {
        self.assert.throws_nothing(function(){
            intcls();
        });
    }

    function create() {
        var i = intcls();
        self.assert.throws_nothing(function(){
            i.__new__(i, 2);
        });
    }

    function repr() {
        var i = intcls();
        var a = i.__new__(i, 1);

        self.assert.equal(a.__repr__(a), '1');
    }

    function add() {
        var i = intcls();
        var a = i.__new__(i, 20); 
        var b = i.__new__(i, 22); 

        self.assert.equal(a.__add__(a, b), 42);
    }
}

function main() {
    using Rosella.Test.test;
    test(class int);
}
