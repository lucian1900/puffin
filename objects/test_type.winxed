$load 'rosella/test.pbc';
$load 'type.pbc';

function boot() {    
    var o = new Python.type('object', null);
    var t = new Python.type('type', null, o);

    t.__class__ = t;
    o.__class__ = t;

    return o, t;
}

class Testtype {
    function test_type_recur() {
        var o; var t; :(o, t) = boot();
        self.assert.equal(t.__class__.__name__, t.__name__);
    }

    function test_object_repr() {
        var o; var t; :(o, t) = boot();
        self.assert.equal(o.get('__repr__')(o), "<class 'object'>");
    }
}

function main() {
    using Rosella.Test.test;

    test(class Testtype);
}

